<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Lineup Generator - Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .controls {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .lineup-container {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
        button.active {
            background: #45a049;
        }
        select, input {
            padding: 8px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        input[type="color"] {
            width: 60px;
            height: 40px;
            padding: 2px;
            border: 2px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            background: none;
        }
        input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
            border: none;
            border-radius: 4px;
        }
        input[type="color"]::-webkit-color-swatch {
            border: none;
            border-radius: 4px;
        }
        .color-input-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .formation-buttons {
            margin: 10px 0;
        }
        canvas {
            border: 2px solid #ddd;
            border-radius: 8px;
            max-width: 100%;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            align-items: center;
        }
        .player-lists {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .team-list {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .team-list h3 {
            margin-top: 0;
            text-align: center;
            padding: 10px;
            border-radius: 4px;
            color: white;
            font-weight: bold;
        }
        .player-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .player-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .player-item:last-child {
            border-bottom: none;
        }
        .player-number {
            background: #333;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            margin-right: 10px;
        }
        .player-info {
            display: flex;
            align-items: center;
            flex: 1;
        }
        .player-name {
            font-weight: bold;
            margin-right: 10px;
        }
        .player-position {
            color: #666;
            font-size: 12px;
            text-transform: capitalize;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚öΩ Football Lineup Generator</h1>
        
        <div class="controls">
            <h3>Team Setup</h3>
            <div class="grid">
                <label>Home Team: <input type="text" id="homeTeam" value="Arsenal" /></label>
                <label>Away Team: <input type="text" id="awayTeam" value="Chelsea" /></label>
            </div>
            
            <div class="formation-buttons">
                <h4>Quick Formations:</h4>
                <button onclick="loadFormation('4-3-3')" class="formation-btn active">4-3-3</button>
                <button onclick="loadFormation('4-4-2')" class="formation-btn">4-4-2</button>
                <button onclick="loadFormation('3-5-2')" class="formation-btn">3-5-2</button>
                <button onclick="loadFormation('4-2-3-1')" class="formation-btn">4-2-3-1</button>
            </div>
            
            <h4>Layout Options:</h4>
            <div class="grid">
                <label>Layout Type:
                    <select id="layoutType">
                        <option value="split_pitch" selected>Split Pitch (Separate fields)</option>
                        <option value="half_pitch">Half Pitch (Teams in their halves)</option>
                        <option value="full_pitch">Full Pitch (Both teams across field)</option>
                    </select>
                </label>
                <label>Canvas Size:
                    <select id="canvasSize">
                        <option value="800x600">800x600</option>
                        <option value="1000x700" selected>1000x700</option>
                        <option value="1200x800">1200x800</option>
                    </select>
                </label>
            </div>

            <div style="margin-top: 10px;">
                <label>
                    <input type="checkbox" id="interactiveMode" />
                    <strong>Interactive Mode</strong> - Drag and move players on the field
                </label>
            </div>

            <div style="margin-top: 10px;">
                <label>
                    <input type="checkbox" id="recordingMode" />
                    <strong>Recording Mode</strong> - Record canvas while dragging players
                </label>
            </div>

            <div id="recording-controls" style="margin-top: 10px; display: none;">
                <h4>Recording Controls:</h4>
                <button id="startRecordingBtn" style="background: #f44336;">‚è∫ Start Recording</button>
                <button id="pauseRecordingBtn" style="background: #ff9800; display: none;">‚è∏ Pause</button>
                <button id="resumeRecordingBtn" style="background: #4CAF50; display: none;">‚ñ∂ Resume</button>
                <button id="stopRecordingBtn" style="background: #9E9E9E; display: none;">‚èπ Stop</button>
                <button id="downloadRecordingBtn" style="background: #2196F3; display: none;">‚¨á Download Recording</button>
                <span id="recording-status" style="margin-left: 10px; font-weight: bold; color: #666;"></span>
            </div>

            <h4>Styling Options:</h4>
            <div class="grid">
                <div class="color-input-container">
                    <label>Field Color:</label>
                    <input type="color" id="fieldColor" value="#4CAF50" />
                    
                </div>
                <div class="color-input-container">
                    <label>Home Team Color:</label>
                    <input type="color" id="homeColor" value="#FF5722" />
                    
                </div>
                <div class="color-input-container">
                    <label>Away Team Color:</label>
                    <input type="color" id="awayColor" value="#2196F3" />
                </div>
            </div>
            
            <br><br>
            <button onclick="generateLineupExample()">Generate Lineup</button>
        </div>

        <div class="lineup-container">
            <div id="lineup-display">
                <p>Click "Generate Lineup" to see the visualization!</p>
            </div>
            <div id="interactive-info" style="margin-top: 20px; padding: 15px; background: #f0f8ff; border-radius: 8px; display: none;">
                <h4 style="margin-top: 0;">üéÆ Interactive Mode Active</h4>
                <p>Click and drag any player to move them to a new position!</p>
                <p id="last-move" style="color: #666; font-style: italic;">No players moved yet...</p>
            </div>
        </div>
    </div>

    <script type="module">
        // Import from the compiled library
        import { generateLineup, FootballLineupRenderer, Team, Position, LayoutType } from './dist/index.js';

        // Store renderer instance globally for recording controls
        let currentRenderer = null;

        // Formation templates
        const formations = {
            '4-3-3': {
                home: [
                    { name: "Ramsdale", number: 1, position: Position.GOALKEEPER },
                    { name: "White", number: 4, position: Position.RIGHT_BACK },
                    { name: "Saliba", number: 12, position: Position.CENTER_BACK },
                    { name: "Gabriel", number: 6, position: Position.CENTER_BACK },
                    { name: "Zinchenko", number: 35, position: Position.LEFT_BACK },
                    { name: "Partey", number: 5, position: Position.DEFENSIVE_MIDFIELDER },
                    { name: "Odegaard", number: 8, position: Position.CENTER_MIDFIELDER },
                    { name: "Rice", number: 41, position: Position.CENTER_MIDFIELDER },
                    { name: "Saka", number: 7, position: Position.RIGHT_WINGER },
                    { name: "Jesus", number: 9, position: Position.CENTER_FORWARD },
                    { name: "Martinelli", number: 11, position: Position.LEFT_WINGER },
                    { name: "Raya", number: 22, position: Position.SUBSTITUTE },
                    { name: "Nketiah", number: 14, position: Position.SUBSTITUTE },
                    { name: "Smith Rowe", number: 32, position: Position.SUBSTITUTE }
                ],
                away: [
                    { name: "Kepa", number: 1, position: Position.GOALKEEPER },
                    { name: "James", number: 24, position: Position.RIGHT_BACK },
                    { name: "Silva", number: 6, position: Position.CENTER_BACK },
                    { name: "Koulibaly", number: 26, position: Position.CENTER_BACK },
                    { name: "Chilwell", number: 21, position: Position.LEFT_BACK },
                    { name: "Fernandez", number: 8, position: Position.DEFENSIVE_MIDFIELDER },
                    { name: "Kovacic", number: 17, position: Position.CENTER_MIDFIELDER },
                    { name: "Mount", number: 19, position: Position.CENTER_MIDFIELDER },
                    { name: "Sterling", number: 7, position: Position.RIGHT_WINGER },
                    { name: "Jackson", number: 15, position: Position.CENTER_FORWARD },
                    { name: "Mudryk", number: 10, position: Position.LEFT_WINGER },
                    { name: "Sanchez", number: 13, position: Position.SUBSTITUTE },
                    { name: "Broja", number: 18, position: Position.SUBSTITUTE },
                    { name: "Gallagher", number: 23, position: Position.SUBSTITUTE }
                ]
            },
            '4-4-2': {
                home: [
                    { name: "Ramsdale", number: 1, position: Position.GOALKEEPER },
                    { name: "White", number: 4, position: Position.RIGHT_BACK },
                    { name: "Saliba", number: 12, position: Position.CENTER_BACK },
                    { name: "Gabriel", number: 6, position: Position.CENTER_BACK },
                    { name: "Zinchenko", number: 35, position: Position.LEFT_BACK },
                    { name: "Saka", number: 7, position: Position.RIGHT_MIDFIELDER },
                    { name: "Partey", number: 5, position: Position.CENTER_MIDFIELDER },
                    { name: "Rice", number: 41, position: Position.CENTER_MIDFIELDER },
                    { name: "Martinelli", number: 11, position: Position.LEFT_MIDFIELDER },
                    { name: "Jesus", number: 9, position: Position.CENTER_FORWARD },
                    { name: "Nketiah", number: 14, position: Position.CENTER_FORWARD }
                ],
                away: [
                    { name: "Kepa", number: 1, position: Position.GOALKEEPER },
                    { name: "James", number: 24, position: Position.RIGHT_BACK },
                    { name: "Silva", number: 6, position: Position.CENTER_BACK },
                    { name: "Koulibaly", number: 26, position: Position.CENTER_BACK },
                    { name: "Chilwell", number: 21, position: Position.LEFT_BACK },
                    { name: "Sterling", number: 7, position: Position.RIGHT_MIDFIELDER },
                    { name: "Fernandez", number: 8, position: Position.CENTER_MIDFIELDER },
                    { name: "Kovacic", number: 17, position: Position.CENTER_MIDFIELDER },
                    { name: "Mudryk", number: 10, position: Position.LEFT_MIDFIELDER },
                    { name: "Jackson", number: 15, position: Position.CENTER_FORWARD },
                    { name: "Broja", number: 18, position: Position.CENTER_FORWARD }
                ]
            },
            '3-5-2': {
                home: [
                    { name: "Ramsdale", number: 1, position: Position.GOALKEEPER },
                    { name: "White", number: 4, position: Position.CENTER_BACK },
                    { name: "Saliba", number: 12, position: Position.CENTER_BACK },
                    { name: "Gabriel", number: 6, position: Position.CENTER_BACK },
                    { name: "Saka", number: 7, position: Position.RIGHT_MIDFIELDER },
                    { name: "Partey", number: 5, position: Position.DEFENSIVE_MIDFIELDER },
                    { name: "Rice", number: 41, position: Position.CENTER_MIDFIELDER },
                    { name: "Odegaard", number: 8, position: Position.ATTACKING_MIDFIELDER },
                    { name: "Martinelli", number: 11, position: Position.LEFT_MIDFIELDER },
                    { name: "Jesus", number: 9, position: Position.CENTER_FORWARD },
                    { name: "Nketiah", number: 14, position: Position.CENTER_FORWARD }
                ],
                away: [
                    { name: "Kepa", number: 1, position: Position.GOALKEEPER },
                    { name: "James", number: 24, position: Position.CENTER_BACK },
                    { name: "Silva", number: 6, position: Position.CENTER_BACK },
                    { name: "Koulibaly", number: 26, position: Position.CENTER_BACK },
                    { name: "Sterling", number: 7, position: Position.RIGHT_MIDFIELDER },
                    { name: "Fernandez", number: 8, position: Position.DEFENSIVE_MIDFIELDER },
                    { name: "Kovacic", number: 17, position: Position.CENTER_MIDFIELDER },
                    { name: "Mount", number: 19, position: Position.ATTACKING_MIDFIELDER },
                    { name: "Mudryk", number: 10, position: Position.LEFT_MIDFIELDER },
                    { name: "Jackson", number: 15, position: Position.CENTER_FORWARD },
                    { name: "Broja", number: 18, position: Position.CENTER_FORWARD }
                ]
            },
            '4-2-3-1': {
                home: [
                    { name: "Ramsdale", number: 1, position: Position.GOALKEEPER },
                    { name: "White", number: 4, position: Position.RIGHT_BACK },
                    { name: "Saliba", number: 12, position: Position.CENTER_BACK },
                    { name: "Gabriel", number: 6, position: Position.CENTER_BACK },
                    { name: "Zinchenko", number: 35, position: Position.LEFT_BACK },
                    { name: "Partey", number: 5, position: Position.DEFENSIVE_MIDFIELDER },
                    { name: "Rice", number: 41, position: Position.DEFENSIVE_MIDFIELDER },
                    { name: "Saka", number: 7, position: Position.RIGHT_WINGER },
                    { name: "Odegaard", number: 8, position: Position.ATTACKING_MIDFIELDER },
                    { name: "Martinelli", number: 11, position: Position.LEFT_WINGER },
                    { name: "Jesus", number: 9, position: Position.CENTER_FORWARD }
                ],
                away: [
                    { name: "Kepa", number: 1, position: Position.GOALKEEPER },
                    { name: "James", number: 24, position: Position.RIGHT_BACK },
                    { name: "Silva", number: 6, position: Position.CENTER_BACK },
                    { name: "Koulibaly", number: 26, position: Position.CENTER_BACK },
                    { name: "Chilwell", number: 21, position: Position.LEFT_BACK },
                    { name: "Fernandez", number: 8, position: Position.DEFENSIVE_MIDFIELDER },
                    { name: "Kovacic", number: 17, position: Position.DEFENSIVE_MIDFIELDER },
                    { name: "Sterling", number: 7, position: Position.RIGHT_WINGER },
                    { name: "Mount", number: 19, position: Position.ATTACKING_MIDFIELDER },
                    { name: "Mudryk", number: 10, position: Position.LEFT_WINGER },
                    { name: "Jackson", number: 15, position: Position.CENTER_FORWARD }
                ]
            }
        };

        let currentFormation = '4-3-3';

        // Helper function to format position names
        function formatPosition(position) {
            return position.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
        }

        // Function to create player lists HTML
        function createPlayerLists(lineupData, homeColor, awayColor) {
            const homeTeamPlayers = lineupData.homeTeam.players.filter(p => p.position !== Position.SUBSTITUTE);
            const awayTeamPlayers = lineupData.awayTeam.players.filter(p => p.position !== Position.SUBSTITUTE);
            
            const homeSubstitutes = lineupData.homeTeam.players.filter(p => p.position === Position.SUBSTITUTE);
            const awaySubstitutes = lineupData.awayTeam.players.filter(p => p.position === Position.SUBSTITUTE);

            return `
                <div class="player-lists">
                    <div class="team-list home-team">
                        <h3 style="background-color: ${homeColor}">${lineupData.homeTeam.name}</h3>
                        <ul class="player-list">
                            ${homeTeamPlayers.map(player => `
                                <li class="player-item">
                                    <div class="player-info">
                                        <div class="player-number">${player.player.jerseyNumber || '?'}</div>
                                        <span class="player-name">${player.player.name}</span>
                                    </div>
                                    <span class="player-position">${formatPosition(player.position)}</span>
                                </li>
                            `).join('')}
                            ${homeSubstitutes.length > 0 ? `
                                <li style="margin-top: 10px; padding-top: 10px; border-top: 2px solid #ddd; font-weight: bold; color: #666;">Substitutes</li>
                                ${homeSubstitutes.map(player => `
                                    <li class="player-item">
                                        <div class="player-info">
                                            <div class="player-number">${player.player.jerseyNumber || '?'}</div>
                                            <span class="player-name">${player.player.name}</span>
                                        </div>
                                        <span class="player-position">${formatPosition(player.position)}</span>
                                    </li>
                                `).join('')}
                            ` : ''}
                        </ul>
                    </div>
                    <div class="team-list away-team">
                        <h3 style="background-color: ${awayColor}">${lineupData.awayTeam.name}</h3>
                        <ul class="player-list">
                            ${awayTeamPlayers.map(player => `
                                <li class="player-item">
                                    <div class="player-info">
                                        <div class="player-number">${player.player.jerseyNumber || '?'}</div>
                                        <span class="player-name">${player.player.name}</span>
                                    </div>
                                    <span class="player-position">${formatPosition(player.position)}</span>
                                </li>
                            `).join('')}
                            ${awaySubstitutes.length > 0 ? `
                                <li style="margin-top: 10px; padding-top: 10px; border-top: 2px solid #ddd; font-weight: bold; color: #666;">Substitutes</li>
                                ${awaySubstitutes.map(player => `
                                    <li class="player-item">
                                        <div class="player-info">
                                            <div class="player-number">${player.player.jerseyNumber || '?'}</div>
                                            <span class="player-name">${player.player.name}</span>
                                        </div>
                                        <span class="player-position">${formatPosition(player.position)}</span>
                                    </li>
                                `).join('')}
                            ` : ''}
                        </ul>
                    </div>
                </div>
            `;
        }

        // Make functions available globally for onclick handlers
        window.loadFormation = function(formation) {
            currentFormation = formation;
            
            // Update button states
            document.querySelectorAll('.formation-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`button[onclick*="${formation}"]`).classList.add('active');
        };

        window.generateLineupExample = function() {
            const homeTeamName = document.getElementById('homeTeam').value;
            const awayTeamName = document.getElementById('awayTeam').value;
            const fieldColor = document.getElementById('fieldColor').value;
            const homeColor = document.getElementById('homeColor').value;
            const awayColor = document.getElementById('awayColor').value;
            const canvasSize = document.getElementById('canvasSize').value.split('x');
            const layoutType = document.getElementById('layoutType').value;
            const interactiveMode = document.getElementById('interactiveMode').checked;
            const recordingMode = document.getElementById('recordingMode').checked;

            const formation = formations[currentFormation];

            const lineupData = {
                homeTeam: {
                    name: homeTeamName,
                    players: formation.home.map((player, index) => ({
                        player: {
                            id: index + 1,
                            name: player.name,
                            jerseyNumber: player.number
                        },
                        team: Team.RED,
                        position: player.position
                    }))
                },
                awayTeam: {
                    name: awayTeamName,
                    players: formation.away.map((player, index) => ({
                        player: {
                            id: index + 12,
                            name: player.name,
                            jerseyNumber: player.number
                        },
                        team: Team.YELLOW,
                        position: player.position
                    }))
                }
            };

            const config = {
                width: parseInt(canvasSize[0]),
                height: parseInt(canvasSize[1]),
                layoutType: layoutType,
                fieldColor: fieldColor,
                homeTeamColor: homeColor,
                awayTeamColor: awayColor,
                interactive: interactiveMode,
                onPlayerMove: interactiveMode ? (playerId, team, x, y) => {
                    // Find player name
                    const allPlayers = [...lineupData.homeTeam.players, ...lineupData.awayTeam.players];
                    const movedPlayer = allPlayers.find(p => p.player.id === playerId && p.team === team);
                    const playerName = movedPlayer ? movedPlayer.player.name : `Player ${playerId}`;
                    const teamName = team === Team.RED ? homeTeamName : awayTeamName;

                    // Update the last move display
                    const lastMoveEl = document.getElementById('last-move');
                    if (lastMoveEl) {
                        lastMoveEl.textContent = `Last move: ${playerName} (${teamName}) moved to (${Math.round(x)}, ${Math.round(y)})`;
                    }

                    console.log(`Player moved: ${playerName} from ${teamName} to position (${x}, ${y})`);
                } : undefined,
                recording: recordingMode,
                recordingOptions: {
                    fps: 30,
                    videoBitsPerSecond: 2500000
                },
                onRecordingStateChange: recordingMode ? (state) => {
                    updateRecordingStatus(state);
                } : undefined
            };

            try {
                // Clean up previous renderer if exists
                if (currentRenderer) {
                    currentRenderer.destroy();
                    currentRenderer = null;
                }

                // Create canvas element
                const canvas = document.createElement('canvas');

                // Initialize renderer
                currentRenderer = new FootballLineupRenderer(canvas, config);

                // Render the lineup
                currentRenderer.render(lineupData);

                const display = document.getElementById('lineup-display');
                display.innerHTML = '';
                display.appendChild(canvas);

                // Show/hide interactive info
                const interactiveInfo = document.getElementById('interactive-info');
                if (interactiveInfo) {
                    interactiveInfo.style.display = interactiveMode ? 'block' : 'none';
                }

                // Add player lists below the canvas
                const playerListsHTML = createPlayerLists(lineupData, homeColor, awayColor);
                display.insertAdjacentHTML('beforeend', playerListsHTML);
            } catch (error) {
                console.error('Error generating lineup:', error);
                const display = document.getElementById('lineup-display');
                display.innerHTML = '<p style="color: red;">Error generating lineup: ' + error.message + '</p>';
            }
        };

        // Update color previews when colors change
        function updateColorPreview(colorInput, previewElement) {
            previewElement.style.backgroundColor = colorInput.value;
        }

        // Update recording status and button visibility
        function updateRecordingStatus(state) {
            const statusEl = document.getElementById('recording-status');
            const startBtn = document.getElementById('startRecordingBtn');
            const pauseBtn = document.getElementById('pauseRecordingBtn');
            const resumeBtn = document.getElementById('resumeRecordingBtn');
            const stopBtn = document.getElementById('stopRecordingBtn');
            const downloadBtn = document.getElementById('downloadRecordingBtn');

            // Update status text
            switch (state) {
                case 'idle':
                    statusEl.textContent = '';
                    startBtn.style.display = 'inline-block';
                    pauseBtn.style.display = 'none';
                    resumeBtn.style.display = 'none';
                    stopBtn.style.display = 'none';
                    downloadBtn.style.display = 'none';
                    break;
                case 'recording':
                    statusEl.textContent = 'üî¥ Recording...';
                    statusEl.style.color = '#f44336';
                    startBtn.style.display = 'none';
                    pauseBtn.style.display = 'inline-block';
                    resumeBtn.style.display = 'none';
                    stopBtn.style.display = 'inline-block';
                    downloadBtn.style.display = 'none';
                    break;
                case 'paused':
                    statusEl.textContent = '‚è∏ Paused';
                    statusEl.style.color = '#ff9800';
                    startBtn.style.display = 'none';
                    pauseBtn.style.display = 'none';
                    resumeBtn.style.display = 'inline-block';
                    stopBtn.style.display = 'inline-block';
                    downloadBtn.style.display = 'none';
                    break;
                case 'stopped':
                    statusEl.textContent = '‚úì Recording stopped';
                    statusEl.style.color = '#4CAF50';
                    startBtn.style.display = 'inline-block';
                    pauseBtn.style.display = 'none';
                    resumeBtn.style.display = 'none';
                    stopBtn.style.display = 'none';
                    downloadBtn.style.display = 'inline-block';
                    break;
            }
        }

        // Recording control functions
        function startRecording() {
            if (currentRenderer) {
                currentRenderer.startRecording();
            }
        }

        function pauseRecording() {
            if (currentRenderer) {
                currentRenderer.pauseRecording();
            }
        }

        function resumeRecording() {
            if (currentRenderer) {
                currentRenderer.resumeRecording();
            }
        }

        function stopRecording() {
            if (currentRenderer) {
                currentRenderer.stopRecording();
            }
        }

        function downloadRecording() {
            if (currentRenderer) {
                const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);
                currentRenderer.downloadRecording(`lineup-recording-${timestamp}.webm`);
            }
        }

        // Handle automatic lineup generation and control changes
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners for automatic lineup generation
            const layoutTypeSelect = document.getElementById('layoutType');
            const canvasSizeSelect = document.getElementById('canvasSize');
            const fieldColorInput = document.getElementById('fieldColor');
            const homeColorInput = document.getElementById('homeColor');
            const awayColorInput = document.getElementById('awayColor');
            const homeTeamInput = document.getElementById('homeTeam');
            const awayTeamInput = document.getElementById('awayTeam');

            // Auto-generate lineup when layout changes
            layoutTypeSelect.addEventListener('change', function() {
                generateLineupExample();
            });

            // Auto-generate lineup when other controls change
            const interactiveModeCheckbox = document.getElementById('interactiveMode');
            const recordingModeCheckbox = document.getElementById('recordingMode');

            [canvasSizeSelect, fieldColorInput, homeColorInput, awayColorInput, homeTeamInput, awayTeamInput, interactiveModeCheckbox, recordingModeCheckbox].forEach(control => {
                control.addEventListener('change', function() {
                    generateLineupExample();
                });
            });

            // Show/hide recording controls based on recording mode checkbox
            recordingModeCheckbox.addEventListener('change', function() {
                const recordingControls = document.getElementById('recording-controls');
                if (recordingControls) {
                    recordingControls.style.display = this.checked ? 'block' : 'none';
                }

                // If recording is disabled, also enable interactive mode
                if (this.checked && !interactiveModeCheckbox.checked) {
                    interactiveModeCheckbox.checked = true;
                }
            });

            // Recording button event listeners
            document.getElementById('startRecordingBtn').addEventListener('click', startRecording);
            document.getElementById('pauseRecordingBtn').addEventListener('click', pauseRecording);
            document.getElementById('resumeRecordingBtn').addEventListener('click', resumeRecording);
            document.getElementById('stopRecordingBtn').addEventListener('click', stopRecording);
            document.getElementById('downloadRecordingBtn').addEventListener('click', downloadRecording);

            // Generate initial lineup
            setTimeout(generateLineupExample, 500);
        });
    </script>
</body>
</html> 